.table-responsive
  %table.table.table-striped.table-condensed
    %thead
      %tr
        %th
          position
        %th
          token
        %th

        %th
          race time
        %th
          pilot
        %th
          quad
        %th
          team
        %th
          fasted lap time
        %th
          last lap time
        %th
          laps
        %th
          avg lap time
        %th
          penalties
        %th
          penalty time
        %th
          time without penalties
        %th
          Lap 1
        %th
          Lap 2
        %th
          Lap 3
        %th
          Lap 4
        %th
          Lap 5
        %th
    %tbody
      - race_session_adapter.listing.each_with_index do |entry,index|
        %tr{class: "#{"success" if entry['latest_tracked']}"}
          %td
            %strong
              = index + 1
          %td
            %strong
              = entry['token']
          %td
            - if !entry['pilot'].image.blank?
              - if @current_format == :pdf
                = wicked_pdf_image_tag(entry['pilot'].image.url,width: 50,height: 50)
              - else
                = image_tag(entry['pilot'].image.url,width: 50,height: 50)
          %td
            %strong
              = formated_lap_time(entry['race_time_sum_in_ms'])
          %td
            %strong
              = entry['pilot'].name
          %td
            %strong
              = entry['pilot'].quad
          %td
            %strong
              = entry['pilot'].team
          %td
            %strong
              = formated_lap_time(entry['fastest_lap']['lap_time'])
          %td
            %strong
              = formated_lap_time(entry['last_lap']['lap_time'])
          %td
            %strong
              = entry['lap_count']
          %td
            %strong
              = formated_lap_time(entry['avg_lap_time'])
          %td
            %strong
              = entry['num_time_penalties']
          %td
            %strong
              = formated_lap_time(entry['sum_time_penalties_in_ms'])
          %td
            %strong
              = formated_lap_time(entry['race_time_sum_in_ms_without_penalty'])
          %td
            %strong
              = formated_lap_time(@current_race_session.lap_time_of_pilot(entry['pilot'],1))
          %td
            %strong
              = formated_lap_time(@current_race_session.lap_time_of_pilot(entry['pilot'],2))
          %td
            %strong
              = formated_lap_time(@current_race_session.lap_time_of_pilot(entry['pilot'],3))
          %td
            %strong
              = formated_lap_time(@current_race_session.lap_time_of_pilot(entry['pilot'],4))
          %td
            %strong
              = formated_lap_time(@current_race_session.lap_time_of_pilot(entry['pilot'],5))
          %td
            - if @current_race_session.active && current_user.has_role(:admin)
              = link_to('Remove',url_for(action: 'destroy', controller: '/api/v1/lap_track', lap_id: entry['last_lap']['id'],ra_id: entry['race_attendee'].id),{method: 'DELETE',class: 'btn btn-warning bt-xs', remote: true})
